 <!DOCTYPE html>
  <html>
  <head>
      <title>Reset Password - Disc Golf Connect</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
      <script>
          // Immediately check if on mobile and deep link to app
          const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

          if (isMobile) {
              // Extract the hash from URL (contains access_token, refresh_token, type)
              const hash = window.location.hash;

              if (hash) {
                  // Deep link back to the mobile app with the recovery token
                  const deepLink = `discgolfconnect://reset-password${hash}`;
                  console.log('[RESET] Deep linking to app:', deepLink);

                  // Try to open the app
                  window.location.href = deepLink;

                  // Show a message in case deep link doesn't work
                  setTimeout(() => {
                      document.body.innerHTML = `
                          <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">
                              <h1>Opening Disc Golf Connect...</h1>
                              <p>If the app doesn't open automatically, please make sure you have the app installed.</p>
                              <p><a href="${deepLink}">Click here to open the app</a></p>
                          </div>
                      `;
                  }, 500);
              } else {
                  document.body.innerHTML = `
                      <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">
                          <h1>Invalid Reset Link</h1>
                          <p>This password reset link is invalid or expired.</p>
                      </div>
                  `;
              }
          } else {
              // On web - show message or handle reset here
              document.body.innerHTML = `
                  <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">
                      <h1>Reset Password</h1>
                      <p>Please open this link on your mobile device where the Disc Golf Connect app is installed.</p>
                  </div>
              `;
          }
      </script>
  </body>
  </html>

